# 고민

### 1. 사용자 인증에 따른 화면 다르게 보이기

사용자 인증에 대한 정보를 활용하기 위해서 처음에는 Cookie에 Session_id가 있는지 확인하고 그에 따라 화면을 다르게 보이려고 했다. 하지만, cookie에는 HttpOnly속성이 있어 document.cookie를 통해 확인이 불가능했다.

그래서 생각한 방안이 User의 상태를 관리할 수 있는 클래스 하나를 싱글톤으로 만들고 그 안에 isLoggedIn이라는 Boolean형태의 데이터로 관리할까 했다. 이를 Node와 마찬가지로 모듈캐싱을 이용해 관리하려 했지만, 안됐다. 이유를 알아보니 해당 js파일은 웹 브라우저에서 실행되기 때문에 NodeJs와는 다른 환경이기 때문이었다...

해당 문제를 어떻게 해결할 것인가..

해당 문제를 메모리적으로 해결해보려 하였다. Static을 활용하여 메모리에 인스턴스를 잡아놓으면 되지 않을까? 하는 기대에 구현을 해보니 모듈캐싱을 활용할때와 마찬가지였다..

조사해보니 Javascript가 페이지가 redirection될 때 서로 다른 메모리를 활용하기 때문에 static으로 해봤자 소용이 없다는 것을 알게 되었다.

방법1) LocalStorage or SessionStorage를 활용하기
방법2) Session 혹은 Token정보에 대해 서버에게 로그인 된 적 있는지를 확인하는 요청을 보낸다.

Session Storage가 독립적이고 격리성이 있기 때문에 활용해보았지만, 뒤로가기를 하거나 할 때 조금 매끄럽지 않은 UI가 보였다. 따라서, 페이지마다 로그인을 했는지에 대한 요청을 보내도록 하였다.
